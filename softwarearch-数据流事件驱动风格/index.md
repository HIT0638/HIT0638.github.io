# Software-Arch 数据流&事件驱动风格(更新中)

# 前言
{{< admonition type=info title=本篇介绍的相关内容概括 open=true >}}
- 数据流风格的基本概念，包括构件、连接件以及拓扑结构。
- 管道-过滤器风格的概念、组成及特征介绍
- 管道-过滤器风格的应用介绍（以KWIC为例）
{{< /admonition >}}

# 正题
## 1 数据流风格概述
首先介绍一下数据流风格的构件以及连接件。

数据流风格的基本构件是数据处理模块，其包含一个输入端口和一个输出端口。
构件从输入端口读取数据后，在模块内利用其计算模型对接收到的数据进行计算/处理，然后通过输出端口将数据输出，利用连接件到达下一个构件或者直接输出。

{{< image src="images/softwareArch-数据流事件驱动风格/comp.png" height=100 >}}

如上图所示，当数据到达后，构件便开始工作（一旦接收到可用数据就开始工作，而不是等待数据接受完毕）。

数据流风格的连接件的核心是数据流，其实现方式包括但不限于管道等。

一个数据流连接件包含输入和输出接口，也就是reader和writer。其基本功能是将数据从一个构件/处理的端口传送到另一个处理的输入端口。但需要注意的是，数据流连接件必须是单向的，根据实现的不同也能具有异步、缓冲的能力。而且，连接件不能进行数据的计算以及处理，其承担的角色只是一个单纯的数据搬运工。

{{< image src="images/softwareArch-数据流事件驱动风格/linker.png" height=100 >}}

如上图所示，连接件提供了数据的缓存以及reader和writer的异步。实现了一边读一边写的功能。

接收前一个构件输入的数据，然后将数据输出给目标构件。

最后，数据流风格由于其构件驱动取决于数据流的流动，并且整个架构的核心在于数据流，故其在拓扑结构上并无特别限制，可以是任意拓扑结构的图。

综上所述，我们对数据流风格作一个宏观上的直观理解：
{{< image src="images/softwareArch-数据流事件驱动风格/dataArch.png" height=300 >}}

如上图所示，在数据流风格架构中，其总体的处理操作可以被概括为：
> 数据到达时被激活，无数据时不工作。

但注意，这个数据是可用的数据，当可用数据到达时，各模块才开始工作。

## 2 管道-过滤器风格

